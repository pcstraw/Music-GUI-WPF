{
  "WorkItem": {
    "AffectedComponent": {
      "Name": "TreeViewEx",
      "DisplayName": "TreeViewEx"
    },
    "ClosedComment": "",
    "ClosedDate": "2012-07-25T23:40:15.227-07:00",
    "CommentCount": 0,
    "Custom": null,
    "Description": "From what I've seen now, it seems that the TreeViewEx control itself is not focusable but each TreeViewExItem is. So basically when you tab through the window, each item is selected, then the next one etc. But this doesn't go in line with the current selection scheme: Click one item to select it, then press the Tab key several times. The clicked item remains selected and then each single focused item is additionally selected in turn. This is highly unexpected when comparing it with other list and tree controls in Windows.\n \nI tried with setting Focusable = false in the TreeViewExItem constructor (as Focusable doesn't seem to be used anywhere yet) but then no keyboard navigation was possible anymore. selecting by clicking was fine though.\n \nI assume that there's a major design flaw in this control that possibly cannot be resolved. Any ideas?",
    "LastUpdatedDate": "2017-11-30T15:06:39.697-08:00",
    "PlannedForRelease": "TreeViewEx 0.1",
    "ReleaseVisibleToPublic": true,
    "Priority": {
      "Name": "Low",
      "Severity": 50,
      "Id": 1
    },
    "ProjectName": "treeviewex",
    "ReportedDate": "2012-07-20T05:52:49.23-07:00",
    "Status": {
      "Name": "Closed",
      "Id": 4
    },
    "ReasonClosed": {
      "Name": "Unassigned"
    },
    "Summary": "Tree items can be selected with the Tab key",
    "Type": {
      "Name": "Issue",
      "Id": 3
    },
    "VoteCount": 1,
    "Id": 23071
  },
  "FileAttachments": [],
  "Comments": [
    {
      "Message": "Hi,\r\n\r\nI see the problem. Pressing tab should bring the focus to the next control not to the next item in the tree. Would setting KeyboardNavigation.IsTabStop to false solve your problem? We could do this in the generic.xaml for example.\r\n\r\n\r\n      <Setter Property=\"KeyboardNavigation.IsTabStop\" Value=\"False\"/>",
      "PostedDate": "2012-07-23T07:54:42.033-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Problem is, the focusable element in this architecture is not the single container control but each content element. This messes up any keyboard focus navigation. Your suggestion has a similar effect. While I can click an item and use arrow key navigation, I cannot tab into the control because now all focusable elements are skipped in the tab order.",
      "PostedDate": "2012-07-24T00:25:04.81-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Also, it is common to use blue highlighting colour for focused selected items, and grey colour for unfocused selected items. But for an item to know whether it should be blue or grey, it must know where the focus is. It can check its parent's focus state, but not all siblings'.\r\n\r\nUsing blue colour even if the control is not currently focused can confuse the user that wants to continue with keyboard navigation which is then directed to an entirely different control that really has the focus but may be less prominent.",
      "PostedDate": "2012-07-24T06:00:04.93-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Regarding my second-previous comment: I thought about setting KeyboardNavigation.IsTabStop=true only for a selected item (via Triggers), but that doesn't solve the issue for multiple selection or no selection at all. In the last case, the tree control still cannot be selected at all by keyboard.\r\n\r\nI've tried changing the tab order by code but didn't manage it. My WPF skills are still too limited for that. My idea was to direct focus from the TreeViewEx control directly to the last focused TreeViewExItem, and altering the focus element before and after the item to skip all other tree items. But at least I didn't find a reference to the last focused tree item.\r\n\r\nThe correct setting of the blue/grey colour is still unresolved though.",
      "PostedDate": "2012-07-25T07:15:13.363-07:00",
      "Id": -2147483648
    },
    {
      "Message": "I think I'm on the way to a solution. It's gonna be a hack because I cannot change the fundamental focus architecture, but it should heal many of the symptoms. But whatever I'll end up with, it will be a version of the code which is modified in more than this affair.",
      "PostedDate": "2012-07-25T09:18:22.503-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2012-07-25T23:38:30.263-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Resolved with changeset 68145.",
      "PostedDate": "2012-07-25T23:40:15.227-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Hi,\r\n\r\nplease look at the last commit. I've added the FocusTestSample and set IsTabStop to false for the TreeViewItems. With the sample you can compare the behaviour of the properties relevant for focus between TreeViewEx and the original TreeView.\r\n\r\nFor me, everything looks Ok. Tab is working like it should and the properties behave like the ones of the original TreeView.\r\n\r\nWhat do you think?",
      "PostedDate": "2012-07-25T23:42:46.873-07:00",
      "Id": -2147483648
    },
    {
      "Message": "In this example, TreeViewEx is completely unreachable by keyboard. The TreeViewEx control itself gets focused, but none of the items can be selected from there.\r\n\r\nSteps to test the TreeView control:\r\n\r\nStart the application, press the Tab key to focus the TreeView control at the right side. It has a dashed focus rectangle around it. Press the Down arrow key. The first TreeViewItem is selected. And it seems, the item itself is really focused, I didn't know that. It's different from WinForms. Now press the Tab key again to switch through all controls back to the TreeView at the right side. Now, the last-focused item is focused again, not the TreeView control itself.\r\n\r\nSteps to test the TreeViewEx control:\r\n\r\nStart the application, press the Tab key to focus the TreeViewEx control at the left side. It also has a dashed focus rectangle around it. Press the Down arrow key. No item is selected. Click a TreeViewExItem to select it. It is also focused now. Press the Tab key again to switch through all controls back to the TreeViewEx control at the left side. Now, the TreeViewEx control is focused (with its dashed rectangle), not the last-focused item. Again, no items can be selected through the keyboard.",
      "PostedDate": "2012-07-26T01:27:32.67-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2013-02-14T12:22:34.757-08:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2013-05-16T01:29:11.637-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2017-11-30T15:06:39.697-08:00",
      "Id": -2147483648
    }
  ]
}